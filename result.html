<!doctype html><html lang="zh-Hant"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>成績</title><link rel="stylesheet" href="styles.css"></head><body><header class="header container"><h1>測驗成績</h1>
  <div style=\"position:absolute;right:16px;top:14px;\"><button class=\"btn small ghost\" onclick=\"location.href='home.html'\">← 返回主選單</button></div></header><main class="container"><div id="report" class="result">載入中…</div><div style="margin-top:12px"><button onclick="location.href='home.html'" class="btn">回首頁</button></div></main><script src="app-common.js"></script>
<script src="app-common.js"></script>
<script>
(function(){
  const r = loadLastResult();
  const container = document.getElementById('report');
  if(!r){ container.innerHTML = '<p>沒有成績紀錄。</p>'; return; }
  const details = JSON.parse(localStorage.getItem('lastAnswers')||'null');
  let html = `<h3>單元：${r.unit || ''}</h3><p>作答時間：${r.time} 秒</p><p>正確率：${r.accuracy}%</p><p>分數：${r.score} 分</p><p>完成時間：${new Date(r.timestamp).toLocaleString()}</p>`;
  if(details && details.answers && details.answers.length){
    const wrongs = details.answers.filter(a=>!a.isCorrect);
    html += `<h4 style="margin-top:12px">錯題（共 ${wrongs.length} 題）</h4>`;
    if(wrongs.length===0){ html += '<p>恭喜全部答對！</p>'; }
    else{
      html += '<ol>';
      wrongs.forEach(w=>{
        html += `<li style="margin-bottom:8px"><div><strong>${w.index}. ${w.type==='A' ? '英→中' : '中→英'}</strong></div><div>題目：${escapeHtml(w.prompt)}</div><div>你的答案：${escapeHtml(w.selected)}</div><div style="color:#2d6df6">正確答案：${escapeHtml(w.correct)}</div></li>`;
      });
      html += '</ol>';
    }
  } else {
    html += '<p>沒有詳細答題記錄。</p>';
  }
  container.innerHTML = html;
})();
</script>
<script src="app-common.js"></script><script>const rr=loadLastResult(); if(rr){const el=document.getElementById('report'); el.innerHTML += '<p style="margin-top:8px"><a href="wrongbook.html?u='+ (rr.unit||'unit1') + '">查看錯題本</a></p>';} </script></body></html>